#!/usr/bin/env bash

set -e

cd "$(dirname "$0")/.."

echo "ğŸ§ª Running XCC Integration Tests"

# Run validation
echo "ğŸ” Validating integration structure..."
python validate_integration.py

# Run unit tests
echo "ğŸ§ª Running unit tests..."
python -m pytest tests/ -v --tb=short --cov=custom_components.xcc --cov-report=term-missing

# Run MQTT dependency test
echo "ğŸ” Testing MQTT dependency handling..."
python test_no_mqtt.py

echo "âœ… All tests completed!"
